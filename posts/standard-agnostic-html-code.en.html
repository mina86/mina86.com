<!-- subject: Standard-agnostic HTML code -->
<!-- date: 2013-07-17 07:42:38 -->
<!-- tags: html, html5, xhtml -->
<!-- categories: Articles, Techblog -->

<p>HTML has gone quite a long way since its inception.  This means
  a lot of new features but also some small incompatibilities which
  may pose issues in certain situations.  For instance, when posting
  a code snippet for others to include on their websites, it’s best if
  it works correctly on as many sites as possible which implies being
  compatible with as many versions of HTML as possible.  But how to
  create a snippet that works both in HTML and XHTML?  Here are a few
  tips:

<!-- FULL -->

<ul>
  <li><strong>Always use lowercase</strong>.  This applies to element
    names, attribute names and enumerated attribute values (such as
    values for the <code>type</code> attribute of <code>input</code> element),
    but it helps to apply this rule to fragment identifies and class
    names as well (since fragment identifiers and class names are case
    sensitive in XHTML and therefore it’s easy to create a piece of JavaScript
    code or a style sheet which won’t work for XHTML documents).
  <li><strong>Include and quote attribute values</strong>.  Always put
    double quotes around attribute values and don’t use empty
    attributes syntax, i.e. always include value for attributes such
    as <code>compact</code>, for example <code>&lt;dl
    compact="compact"&gt;</code>.
  <li><strong>Use <code>lang</code> and <code>xml:lang</code></strong>.  XHTML
    replaces <code>lang</code> attribute with <code>xml:lang</code> so for
    compatibility use both.
  <li><strong>Use well formed document</strong>.  Close all tags and
    do that in reverse order to how they opened.  Furthermore, avoid
    void elements (such as <code>br</code>) but if they are necessary (for
    instance <code>img</code>) close them using minimised syntax (with
    a space before the slash) as in <code>&lt;img … /&gt;</code>. This is
    technically invalid in HTML4 but all respectable browsers will
    interpret it correctly.
  <li><strong>Always include optional elements</strong>.  Always open
    the following elements: <code>html</code>, <code>head</code>,
    <code>body</code>, <code>colgroup</code> and most notably <code>tbody</code>.
    Otherwise JavaScript or CSS may stop working correctly
    when <code>tbody</code> element suddenly appears as a first and only
    child of <code>table</code>.
  <li><strong>Use numeric entities</strong>.  Except
    for <code>&amp;lt;</code>, <code>&amp;gt;</code>, <code>&amp;amp;</code>
    and <code>&amp;quot;</code>, always use numeric entity references.
    Moreover, when using hexadecimal notation, use lowercase <code>x</code>.
  <li><strong>Always escape special characters</strong>.  Always
    escape &lt;, &gt; and &amp; characters. That means inside of <code>href</code> too.
  <li><strong>Avoid HTML5 goodness</strong>.  HTML5 defines bunch of
    new elements, attributes and attribute values.  For maximum
    compatibility, avoid them, unless the fact that it won’t work is
    acceptable (e.g. <code>placeholder</code> attribute may be nice to
    have but not required).
  <li><strong>Avoid deprecated features</strong>.  Here’s a few
    elements that are best avoided: <code>basefont</code>, <code>big</code>,
    <code>center</code>, <code>font</code>, <code>strike</code>, <code>tt</code>,
    <code>iframe</code>, <code>frame</code>, <code>frameset</code>, <code>noframes</code>,
    <code>acronym</code> (use <code>abbr</code>), <code>applet</code> (use
    <code>object</code>), <code>isindex</code>, <code>dir</code> and <code>u</code>.
    There’s also a whole bunch of attributes that HTML5 does not
    include, but it may be hard to avoid them all.  As a rule of
    thumb, if something is purely presentational use styles instead.
  <li><strong>CDATAify inline JavaScript and CSS</strong>.  If it contains &lt;, &gt; or &amp; characters, either use
    external file or the following syntax:
    <pre>
&lt;script type="text/javascript"&gt;//&lt;![CDATA[
<i>JavaScript code here</i>
//]]&gt;&lt;/script&gt;

&lt;style type="text/css"&gt;/*&lt;![CDATA[*/
<i>CSS code here</i>
/*]]&gt;*/&lt;/style&gt;</pre>
    And yes, include <code>type</code> attribute and do not hide the code
    with HTML comments (<code>&lt;!-- … --&gt;</code>).
    Also, while talking about inline code, avoid <code>&lt;/</code> sequence
    since depending on what follows, it may terminate the element.
</ul>

<h2>JavaScript</h2>

<ul>
  <li><strong>Convert <code>tagName</code> to lowercase</strong>, also
    applies to <code>nodeName</code>.  In HTML they return uppercase names
    but in XHTML they return lowercase names.
    Using <code>tagName.toLowerCase()</code> unifies the values.
  <li><strong>Specify namespace</strong>.
    Use <code>createElementNS</code> instead of <code>createElement</code> if
    available.  Same goes for <code>getElementsByTagNameNS</code>
    and <code>{create,set,get,has,remove}AttributeNS</code>.  you happen
    to use it.
</ul>

<h2>Afterword</h2>

<p>It needs to be noted that the above rules are not exhaustive and do
  not include things that everyone is doing anyway (like
  using <code>id</code> attribute for fragment identifiers instead of
  (just) <code>name</code>), have limited application to code snippets
  (like styling of <code>html</code> and <code>body</code> differences), or
  produce only minor differences (like handling of white-space in
  attributes or leading line feed in <code>pre</code>).  Neither does this
  entry advertise writing whole documents in something that appears to
  be valid HTML4, XHTML and HTML5 (but for HTML5 which is valid XML
  see <a href="http://dev.w3.org/html5/html-xhtml-author-guide/">polyglot
  markup</a>), even though it does advertise writing JavaScript and
  CSS code that works in all those recommendations and their various
  variants.

<!-- COMMENT -->
<!-- date: 2013-07-17 20:20:52 -->
<!-- nick: ellem -->

<p>or use html5.

<!-- COMMENT -->
<!-- date: 2013-07-18 09:35:13 -->
<!-- nick: mina86 -->
<!-- nick_url: http://mina86.com -->

<blockquote>
  <p>or use html5.
</blockquote>

<p>Except, if you provide a snippet for <em>others</em> to include on <em>their</em> website, you have no control over which recommendation they are using.
