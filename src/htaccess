RewriteEngine On
RewriteBase "/"

# Old paths for post URLs and category indexes:
RewriteRule "^20[01][0-9]/[0-1][0-9]/[0-3][0-9]/(.*)/"     "p/$1/"          [L,R=permanent]
RewriteRule "^kategoria/([a-z]*)/$"                        "c/$1/"          [L,R=permanent]

# Atom and RSS feeds.  Current code doesn’t have as much configuration as the
# old site so this flattens all of the feeds to a single format.
RewriteRule "^atom/cat/([a-z]*)/"                          "c/$1/atom.xml"  [L,R=permanent]
RewriteRule "^atom/content/"                               "atom.xml"       [L,R=permanent]

# If browser supports gzip and we have compressed file, send it.
RewriteCond %{HTTP:Accept-Encoding} gzip
RewriteCond %{REQUEST_FILENAME}.gz -f
RewriteRule ^(.*)$ $1.gz [L]
Header append Vary Accept-Encoding

# application/javascript is technically correct but HTML5 uses text/javascript
# as SCRIPT’s default TYPE so let’s stick to that.
AddType text/javascript .js

# Atom is the only thing .xml is used on the site so we might just as well use
# proper content type for it.
AddType application/atom+xml .xml
